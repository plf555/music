webpackJsonp([7],{"4lxc":function(e,t){},"7HPk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("BO1k"),n=i.n(a),s=i("gyMJ"),r=i("95YI"),l=i.n(r),o=i("msXN"),c={components:{"v-distpicker":l.a},mixins:[o.a],data:function(){return{centerDialogVisible:!1,editVisible:!1,delVisible:!1,registerForm:{singerName:"",singerId:""},form:{id:"",singerId:"",singerName:""},tableData:[],tempData:[],select_word:"",pageSize:10,pageNum:1,total:0,idx:-1,multipleSelection:[],allSingerTable:[],swiper:{}}},computed:{data:function(){return this.tableData.slice((this.pageNum-1)*this.pageSize,this.pageNum*this.pageSize)}},watch:{select_word:function(){if(""==this.select_word)this.tableData=this.tempData;else{this.tableData=[];var e=!0,t=!1,i=void 0;try{for(var a,s=n()(this.tempData);!(e=(a=s.next()).done);e=!0){var r=a.value;r.singerName.includes(this.select_word)&&this.tableData.push(r)}}catch(e){t=!0,i=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw i}}}}},created:function(){this.getData(),this.getAllSinger()},methods:{handleCurrentChange:function(e){this.pageNum=e,this.getData()},handleSizeChange:function(e){this.pageSize=e,this.getData()},getAllSinger:function(){var e=this;this.allSingerTable=[],Object(s.a)().then(function(t){for(var i in t.data)e.allSingerTable.push(t.data[i])})},getData:function(){var e=this;this.tempData=[],this.tableData=[];var t={pageSize:this.pageSize,pageNum:this.pageNum};Object(s.s)(t).then(function(t){e.tempData=t.data.records,e.tableData=t.data.records,e.total=t.data.total})},addSwiper:function(){var e=this,t=new FormData(document.getElementById("tf1"));t.append("singerName",this.registerForm.singerName),t.append("singerId",this.registerForm.singerId);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var t=JSON.parse(i.response);1==t.code?(e.getData(),e.registerForm={},e.notify(t.message,"success")):e.notify(t.message,"error")}},i.open("post",e.$store.state.HOST+"/swiper/addSwiper",!1),i.send(t),e.centerDialogVisible=!1},handleEdit:function(e){this.editVisible=!0,this.form={id:e.id,singerId:e.singerId}},singerSelect:function(e){this.form.singerId=e.singerId,this.form.singerName=e.singerName},singerSelect1:function(e){this.registerForm.singerId=e.singerId,this.registerForm.singerName=e.singerName},editSave:function(e){var t=this;this.swiper.id=this.form.id,this.swiper.singerId=this.form.singerId,this.swiper.singerName=this.form.singerName;var i=this.swiper;Object(s.H)(i).then(function(e){1==e.code?(t.getData(),t.notify(e.message,"success")):t.notify(e.message,"error")}).catch(function(e){console.log(e)}),this.editVisible=!1},deleteRow:function(){var e=this;Object(s.j)(this.idx).then(function(t){1==t.code?(e.getData(),e.notify(t.message,"success")):e.notify(t.message,"error")}).catch(function(e){console.log(e)}),this.delVisible=!1}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"container"},[i("div",{staticClass:"handle-box"},[e._v("\n            在当前页搜索：\n            "),i("el-input",{staticClass:"handle-input",attrs:{size:"mini",placeholder:"请输入绑定歌手"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.delBatch}},[e._v("批量删除")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v("添加轮播图")])],1)]),e._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"mini",border:"","row-style":{height:"370px"},"cell-style":{padding:"0px"},data:this.tableData},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),i("el-table-column",{attrs:{label:"轮播图",width:"1000",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"singer-img"},[i("img",{staticStyle:{width:"640px"},attrs:{src:e.getUrl(t.row.url)}})])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"singerName",label:"绑定歌手",width:"220",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"220",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("div",{staticClass:"pagination",staticStyle:{"text-align":"right"}},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{background:"",page:e.pageNum,"page-sizes":[2,5,10,20],limit:e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:page":function(t){e.pageNum=t},"update:limit":function(t){e.pageSize=t}}})],1),e._v(" "),i("el-dialog",{attrs:{title:"添加轮播图",visible:e.centerDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"label-width":"100px",action:"",id:"tf1"}},[i("el-form-item",[i("label",[e._v("绑定歌手")]),e._v(" "),i("el-select",{staticStyle:{width:"100%"},attrs:{name:"singerName",placeholder:"请输入歌手名",remote:!0,"reserve-keyword":"",filterable:!0},on:{change:function(t){return e.singerSelect1(t)}},model:{value:e.registerForm.singerName,callback:function(t){e.$set(e.registerForm,"singerName",t)},expression:"registerForm.singerName"}},e._l(e.allSingerTable,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:{singerName:e.name,singerId:e.id}}})}),1)],1),e._v(" "),i("el-form-item",[i("label",[e._v("上传图片")]),e._v(" "),i("input",{attrs:{type:"file",name:"file"}})])],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.addSwiper}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑此轮播图",visible:e.editVisible,width:"400px",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[i("el-form-item",{attrs:{prop:"singerName",label:"更改绑定歌手",size:"mini"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入歌手名",remote:!0,"reserve-keyword":"",filterable:!0},on:{change:function(t){return e.singerSelect(t)}},model:{value:e.form.singerName,callback:function(t){e.$set(e.form,"singerName",t)},expression:"form.singerName"}},e._l(e.allSingerTable,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:{singerName:e.name,singerId:e.id}}})}),1)],1)],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.editVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.editSave()}}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"删除轮播图",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[i("div",{attrs:{align:"center"}},[e._v("删除不可恢复，是否确定删除？")]),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.delVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.deleteRow}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var g=i("VU/8")(c,d,!1,function(e){i("4lxc")},"data-v-6374cd68",null);t.default=g.exports}});
//# sourceMappingURL=7.1a31a70b2b4b35fd4964.js.map